{"ast":null,"code":"import { ActivatedRoute } from '@angular/router';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { UserService, AlertService, AuthenticationService } from '@app/_services';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@app/_services\";\nimport * as i4 from \"@angular/common\";\nconst _c0 = a0 => ({\n  \"is-invalid\": a0\n});\nfunction HomeComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"h3\");\n    i0.ɵɵtext(2, \"Loading ...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HomeComponent_div_20_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Key is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtemplate(1, HomeComponent_div_20_div_1_Template, 2, 0, \"div\", 24);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.f.sshkey.errors.required);\n  }\n}\nfunction HomeComponent_img_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 25);\n  }\n}\nexport let HomeComponent = /*#__PURE__*/(() => {\n  class HomeComponent {\n    constructor(formBuilder, route, authenticationService, userService, alertService) {\n      this.formBuilder = formBuilder;\n      this.route = route;\n      this.authenticationService = authenticationService;\n      this.userService = userService;\n      this.alertService = alertService;\n      this.loading = false;\n      this.submitted = false;\n      this.html1 = '<h1>Capture The Firmware</h1>';\n      this.html2 = 'Challenge Description:<br>Your goal is to capture the flag inside the memory of an emulated ECU.<br>The memory region starts at 0x1000 and the flag format is FLAG{example_of_flag}';\n      this.html3 = 'Challenge setup:<br>Submit your public ssh key and access the challenge as canopener@167.71.17.37<br>can-utils and caringcaribou (cc.py) are already installed, canbus is over vcan0.';\n      //html4 = 'Hint:<br>https://ioactive.com/adventures-in-automotive-networks-and-control-units/';\n      this.html5 = 'Rules of engagement:<br>You are only allowed to write and read out of the VCAN0 bus<br>do not change anything else<br>files and directories within the server are out of the scope of this challenge.';\n      this.authenticationService.currentUser.subscribe(x => this.currentUser = x);\n    }\n    ngOnInit() {\n      this.sshkey = this.currentUser.sshkey;\n      this.homeForm = this.formBuilder.group({\n        sshkey: ['', Validators.required]\n      });\n    }\n    ngOnDestroy() {\n      // unsubscribe to ensure no memory leaks\n      this.currentUserSubscription.unsubscribe();\n    }\n    // convenience getter for easy access to form fields\n    get f() {\n      return this.homeForm.controls;\n    }\n    // OnClick of button Submit key\n    onSubmit() {\n      this.submitted = true;\n      // stop here if form is invalid\n      if (this.homeForm.invalid) {\n        return;\n      }\n      this.loading = true;\n      this.userService.submitkey(this.homeForm.value).subscribe(data => {\n        this.currentUser.sshkey = this.f.sshkey.value;\n        localStorage.setItem('currentUser', JSON.stringify(this.currentUser));\n        this.alertService.success('SSH key has been updated', true);\n        location.reload();\n      }, error => {\n        this.alertService.error(error);\n        this.loading = false;\n      });\n    }\n    static #_ = this.ɵfac = function HomeComponent_Factory(t) {\n      return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.AuthenticationService), i0.ɵɵdirectiveInject(i3.UserService), i0.ɵɵdirectiveInject(i3.AlertService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: HomeComponent,\n      selectors: [[\"ng-component\"]],\n      decls: 31,\n      vars: 13,\n      consts: [[1, \"full\"], [1, \"main\"], [1, \"top\"], [1, \"upload-row\"], [2, \"display\", \"flex\"], [\"class\", \"container\", 4, \"ngIf\"], [1, \"ssh-container\"], [1, \"description\"], [3, \"innerHTML\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"form-group\"], [\"for\", \"sshkey\"], [\"placeholder\", \"Paste your public SSH key here\", \"rows\", \"4\", \"cols\", \"50\", \"formControlName\", \"sshkey\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\", \"ngClass\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [1, \"primary-btn\", 3, \"disabled\"], [\"class\", \"pl-3\", \"src\", \"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\", 4, \"ngIf\"], [1, \"connection-lines\"], [1, \"line\"], [1, \"line\", 2, \"animation-delay\", \"0.5s\"], [1, \"line\", 2, \"animation-delay\", \"1s\"], [1, \"line\", 2, \"animation-delay\", \"1.5s\"], [1, \"line\", 2, \"animation-delay\", \"2s\"], [1, \"container\"], [1, \"invalid-feedback\"], [4, \"ngIf\"], [\"src\", \"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\", 1, \"pl-3\"]],\n      template: function HomeComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n          i0.ɵɵtemplate(5, HomeComponent_div_5_Template, 3, 0, \"div\", 5);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(6, \"div\", 6)(7, \"div\", 7);\n          i0.ɵɵelement(8, \"p\", 8)(9, \"p\", 8)(10, \"p\", 8)(11, \"p\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"h1\");\n          i0.ɵɵtext(13, \"SSH Key Upload\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"form\", 9);\n          i0.ɵɵlistener(\"ngSubmit\", function HomeComponent_Template_form_ngSubmit_14_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(15, \"div\", 10)(16, \"label\", 11);\n          i0.ɵɵtext(17, \"Enter your public SSH key here:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"textarea\", 12);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function HomeComponent_Template_textarea_ngModelChange_18_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.sshkey, $event) || (ctx.sshkey = $event);\n            return $event;\n          });\n          i0.ɵɵtext(19, \"                        \\n                    \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(20, HomeComponent_div_20_Template, 2, 1, \"div\", 13);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"div\", 10)(22, \"button\", 14);\n          i0.ɵɵtext(23, \"Submit SSH key\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(24, HomeComponent_img_24_Template, 1, 0, \"img\", 15);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(25, \"div\", 16);\n          i0.ɵɵelement(26, \"div\", 17)(27, \"div\", 18)(28, \"div\", 19)(29, \"div\", 20)(30, \"div\", 21);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"innerHTML\", ctx.html1, i0.ɵɵsanitizeHtml);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"innerHTML\", ctx.html2, i0.ɵɵsanitizeHtml);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"innerHTML\", ctx.html3, i0.ɵɵsanitizeHtml);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"innerHTML\", ctx.html5, i0.ɵɵsanitizeHtml);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"formGroup\", ctx.homeForm);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.sshkey);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(11, _c0, ctx.submitted && ctx.f.sshkey.errors));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.submitted && ctx.f.sshkey.errors);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", ctx.loading);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        }\n      },\n      dependencies: [i4.NgClass, i4.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n      encapsulation: 2\n    });\n  }\n  return HomeComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}